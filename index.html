<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>PULSE Data Visualization</title>
        <link rel="stylesheet" href="assets/css/pulseScatter.css" charset="utf-8">
        <link rel="stylesheet" href="assets/css/pulseTable.css" charset="utf-8">
        <script src="d3/d3.v3.js" charset="utf-8"></script>
        <script src="d3/d3.tip.v0.6.3.js"></script>
    </head>
    <body>
        <!-- D3.js -->
<!--         <script src="pulse/pulseScatter.js" charset="utf-8"></script> -->
        <script src="pulse/pulseTable.js" charset="utf-8"></script>

<!--         <div id="viz"></div> -->
        <script>
            var Vis = {}
            Vis.data = new Array()
            var width = 1000
                height = 600

            var data
            var csvFile = "data/protein_to_score.txt"

            var table = d3.select("body")
                        .append("table")
                        .attr("width", width)
                        .attr("height", height)
            
            function createViz() {
                // Create scatter plot group
                // var scatterGroup = svg.append("g")
                //     .attr("transform", "translate(50, 0)")
                // var scatter = d3.chart.scatter()
                // scatter.data(Vis.data)
                // scatter(scatterGroup)

                // Create table group
                var tableGroup = d3.select("table")
                                   .attr("transform", "translate(0, 10)")
                var table = d3.chart.table()
                table.data(Vis.data)
                table(tableGroup)

                // scatter.on("click", clicked =>
                // table.highlight(clicked))

                // table.on("change", function(changed) {
                //     scatter.data(changed)
                //     scatter.update()
                // })
            }

            function loadCsv(file_name) {
                d3.csv(file_name, function(error, file_data) { Vis.data = file_data
                // Build data array
                Vis.data.forEach(function(d) {
                  d.index = +d.index
                  d.transcript = d.transcript
                  d.protein = d.protein
                  d.probability = +d.probability
                })
                createViz()
            })
            }

            // Load CSV --> create viz
            loadCsv(csvFile)

        </script>
        
    </body>
</html>